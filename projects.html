<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="style.css">
    <title>Projects ‚Ä¢ Obaniwa Michael</title>
    <link rel="preload" as="image" href="assets/m1.png">
    <style>
      /* Page-specific styles (kept minimal and scoped) */
      :root {
        --snap-gap: 10vh;
      }
      /* Use same 3D background as index (handled by three-background.js) */
      .projects-snap-container {
        scroll-snap-type: y mandatory;
        overflow-y: auto;
        height: 100vh;
        scroll-behavior: smooth;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: thin;
        scrollbar-color: rgba(255,255,255,0.2) transparent;
      }
      .projects-snap-container::-webkit-scrollbar {
        width: 8px;
      }
      .projects-snap-container::-webkit-scrollbar-track {
        background: transparent;
      }
      .projects-snap-container::-webkit-scrollbar-thumb {
        background: rgba(255,255,255,0.2);
        border-radius: 4px;
      }
      .projects-snap-container::-webkit-scrollbar-thumb:hover {
        background: rgba(255,255,255,0.3);
      }
      .project-panel {
        scroll-snap-align: start;
        scroll-snap-stop: always;
        min-height: 100vh;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
        align-items: center;
        padding: 10vh 6vw;
        position: relative;
        opacity: 1;
        overflow: hidden;
      }
      .project-panel:nth-child(odd) {
        grid-template-columns: 1.1fr .9fr;
      }
      .project-info {
        position: relative;
        z-index: 1;
      }
      .project-info h2 {
        margin: 0 0 .6rem 0;
        font-size: 2rem;
        letter-spacing: .5px;
      }
      .project-info p { opacity: .9; }
      .tech-tags { margin-top: .75rem; display: flex; flex-wrap: wrap; gap: .5rem; }
      .tech-tags .tag { 
        padding: .35rem .6rem; 
        border: 1px solid rgba(255,255,255,.15); 
        border-radius: 999px; 
        font-size: .85rem; 
        opacity: .9;
      }
      .project-links { margin-top: 1rem; display: flex; gap: .75rem; }
      .project-links a { 
        text-decoration: none; 
        padding: .6rem .9rem; 
        border-radius: 10px; 
        border: 1px solid rgba(255,255,255,.2);
        display: inline-block;
      }
      .project-media {
        position: relative;
        perspective: 1200px;
        z-index: 1;
      }
      .project-card {
        background: rgba(20,20,30,.45);
        backdrop-filter: blur(8px);
        border: 1px solid rgba(255,255,255,.08);
        border-radius: 16px;
        overflow: hidden;
        transform: rotateX(6deg) rotateY(-6deg);
        box-shadow: 0 20px 60px rgba(0,0,0,.35),
                    0 0 40px rgba(120,80,255,.1);
        transition: box-shadow 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                    transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        position: relative;
        min-height: 300px;
        transform-style: preserve-3d;
        will-change: transform, box-shadow;
      }
      .project-card:hover {
        box-shadow: 0 25px 70px rgba(0,0,0,.45),
                    0 0 60px rgba(120,80,255,.2);
        transform: rotateX(4deg) rotateY(-4deg) translateY(-5px);
      }
      .project-card.image-loaded {
        will-change: transform, box-shadow;
      }
      .project-card img { 
        display:block; 
        width:100%; 
        height:auto; 
        opacity: 0;
        transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        will-change: opacity;
        image-rendering: -webkit-optimize-contrast;
        image-rendering: crisp-edges;
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
        transform: translateZ(0);
        min-height: 200px;
        background: linear-gradient(135deg, rgba(20,20,30,0.6) 0%, rgba(40,40,50,0.4) 100%);
      }
      .project-card img.loaded {
        opacity: 1;
        will-change: auto;
      }
      .project-card img.error {
        object-fit: contain;
        padding: 2rem;
      }
      .project-card.image-error {
        border-color: rgba(255,255,255,0.1);
      }
      .project-card::after {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(90deg, 
          rgba(255,255,255,0.03) 0%, 
          rgba(255,255,255,0.08) 50%, 
          rgba(255,255,255,0.03) 100%);
        background-size: 200% 100%;
        animation: shimmer 2s ease-in-out infinite;
        z-index: 1;
        border-radius: 16px;
        pointer-events: none;
        opacity: 1;
        transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        will-change: background-position, opacity;
      }
      .project-card.image-loaded::after {
        opacity: 0;
        animation: none;
        will-change: auto;
      }
      @keyframes shimmer {
        0% { background-position: -200% 0; }
        100% { background-position: 200% 0; }
      }
      /* Optimize for GPU acceleration */
      .project-panel {
        contain: layout style paint;
      }
      @media (prefers-reduced-motion: no-preference) {
        .project-panel * {
          scroll-behavior: smooth;
        }
      }
      .panel-accent {
        position: absolute; inset: -2px; border-radius: 18px;
        background: radial-gradient(400px 200px at var(--mx,70%) var(--my,30%), rgba(120,80,255,.25), transparent 60%);
        pointer-events: none;
        filter: blur(20px);
        z-index: 0;
      }
      .snap-indicator { position: fixed; bottom: 18px; left: 50%; transform: translateX(-50%); font-size: .85rem; opacity: .7; }
      @media (max-width: 960px){
        .project-panel { grid-template-columns: 1fr; gap: 1.25rem; padding: 8vh 5vw; }
        .project-card { 
          transform: none !important; 
        }
      }
      
      /* Respect reduced motion */
      @media (prefers-reduced-motion: reduce) {
        .project-panel *,
        .project-card,
        .panel-accent {
          animation: none !important;
          transition: none !important;
        }
        .project-card img {
          transition: opacity 0.2s ease !important;
        }
      }
      
      /* Performance optimizations */
      .project-panel {
        content-visibility: auto;
        contain-intrinsic-size: auto 100vh;
      }
      
      /* Improve image loading appearance */
      .project-card:not(.image-loaded) {
        background: linear-gradient(135deg, 
          rgba(20,20,30,0.8) 0%, 
          rgba(30,30,40,0.6) 50%,
          rgba(20,20,30,0.8) 100%);
        background-size: 200% 200%;
        animation: gradient-shift 3s ease infinite;
      }
      
      @keyframes gradient-shift {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
      }
      
      .project-card.image-loaded {
        background: rgba(20,20,30,.45);
        animation: none;
      }
    </style>
  </head>
  <body class="projects-page">
    <!-- Three background and site shell stay consistent -->
    <!-- Three.js Background (same structure as index.html) -->
    <div id="particles-js">
      <div id="loading-indicator" style="
        position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
        color: white; font-size: 18px; z-index: 10; text-align: center;">
        <div style="width: 40px; height: 40px; border: 3px solid rgba(255,255,255,0.3); border-top: 3px solid white; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 10px;"></div>
        Loading 3D Background...
      </div>
    </div>
    <style>
      @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
    <div class="page-overlay"></div>
    <div id="app">
      <header class="header">
        <div class="logo">
          <div class="logo-icon"><span>R</span><span>a</span><span>i</span><span>d</span><span>r</span><span>e</span><span>a</span><span>p</span><span>e</span><span>r</span></div>
        </div>
        <nav class="navigation">
          <a href="index.html" class="nav-link">Home</a>
          <a href="projects.html" class="nav-link active">Projects</a>
          <a href="skills.html" class="nav-link">Skills</a>
          <a href="about.html" class="nav-link">About</a>
          <button class="nav-link contact-btn" id="headerContactBtn">Contact Me</button>
         </nav>
        <div class="header-actions"><button class="icon-btn search-btn">üîç</button></div>
      </header>

      <main class="main-content">
        <section class="projects-section">
          <h1 class="section-title">Projects</h1>
          <p class="section-text">A curated selection of work across web and mobile. Scroll to explore.</p>

          <!-- Filter / Tags -->
          <div class="project-filters" style="display:flex;flex-wrap:wrap;gap:.5rem;margin:1rem 0 1.5rem 0;">
            <button class="btn btn-secondary" data-filter="all">All</button>
            <button class="btn btn-secondary" data-filter="javascript">JavaScript</button>
            <button class="btn btn-secondary" data-filter="threejs">Three.js</button>
            <button class="btn btn-secondary" data-filter="react">React</button>
            <button class="btn btn-secondary" data-filter="nextjs">Next.js</button>
            <button class="btn btn-secondary" data-filter="typescript">TypeScript</button>
            <button class="btn btn-secondary" data-filter="tailwind">Tailwind</button>
            <button class="btn btn-secondary" data-filter="nodejs">Node.js</button>
            <button class="btn btn-secondary" data-filter="express">Express</button>
            <button class="btn btn-secondary" data-filter="mongodb">MongoDB</button>
            <button class="btn btn-secondary" data-filter="python">Python</button>
            <button class="btn btn-secondary" data-filter="django">Django</button>
            <button class="btn btn-secondary" data-filter="postgresql">PostgreSQL</button>
            <button class="btn btn-secondary" data-filter="php">PHP</button>
            <button class="btn btn-secondary" data-filter="mysql">MySQL</button>
            <button class="btn btn-secondary" data-filter="seo">SEO</button>
            <button class="btn btn-secondary" data-filter="vercel">Vercel</button>
          </div>

          <div class="projects-snap-container" id="projectsSnap">
            <!-- Panel 1: Portfolio -->
            <article class="project-panel" data-accent data-tags="html5,css3,javascript,threejs">
              <div class="project-info">
                <h2>Personal Portfolio</h2>
                <p>Modern, responsive portfolio with glass morphism, 3D background, and interactive micro‚Äëinteractions.</p>
                <div class="tech-tags">
                  <span class="tag">HTML5</span><span class="tag">CSS3</span><span class="tag">JavaScript</span><span class="tag">Three.js</span>
                </div>
                  <div class="project-links">
                  <a href="https://kingmaker-ten.vercel.app" target="_blank">Live Demo</a>
                  <button class="btn btn-secondary case-study-btn" data-case-study="personal-portfolio">View Case Study</button>
                </div>
              </div>
              <div class="project-media">
                <div class="project-card">
                  <img 
                    src="assets/m1.png" 
                    alt="Personal Portfolio"
                    loading="eager"
                    fetchpriority="high"
                    decoding="async"
                  >
                </div>
                <div class="panel-accent"></div>
              </div>
            </article>

            <!-- Panel 2: Lover's Code -->
            <article class="project-panel" data-accent data-tags="react,nextjs,typescript,tailwind">
              <div class="project-info">
                <h2>Lover's Code</h2>
                <p>Platform for meaningful connections: AI companionship, matchmaking, and solo journeys.</p>
                <div class="tech-tags">
                  <span class="tag">React</span><span class="tag">Next.js</span><span class="tag">TypeScript</span><span class="tag">Tailwind</span>
                </div>
                <div class="project-links">
                  <a href="https://Lover-livid.vercel.app" target="_blank">Live Demo</a>
                  <button class="btn btn-secondary case-study-btn" data-case-study="lovers-code">View Case Study</button>
                </div>
              </div>
              <div class="project-media">
                <div class="project-card">
                  <img 
                    src="assets/m2.png" 
                    alt="Lover's Code"
                    loading="eager"
                    fetchpriority="high"
                    decoding="async"
                  >
                </div>
                <div class="panel-accent"></div>
              </div>
            </article>

            <!-- Panel 3: Tife's Gourmet -->
            <article class="project-panel" data-accent data-tags="react,nodejs,express,mongodb">
              <div class="project-info">
                <h2>Tife's Gourmet</h2>
                <p>Food business website covering bakery, smoothie bar, and healthy options with ordering.</p>
                <div class="tech-tags">
                  <span class="tag">React</span><span class="tag">Node.js</span><span class="tag">Express</span><span class="tag">MongoDB</span>
                </div>
                <div class="project-links">
                  <a href="https://Tife.lovestoblog.com" target="_blank">Live Demo</a>
                  <button class="btn btn-secondary case-study-btn" data-case-study="tifes-gourmet">View Case Study</button>
                </div>
              </div>
              <div class="project-media">
                <div class="project-card">
                  <img 
                    src="assets/m3.png" 
                    alt="Tife's Gourmet"
                    loading="lazy"
                    decoding="async"
                  >
                </div>
                <div class="panel-accent"></div>
              </div>
            </article>

            <!-- Panel 4: Springbase School Management System -->
            <article class="project-panel" data-accent data-tags="php,mysql,javascript,html5,css3">
              <div class="project-info">
                <h2>Springbase School Management System</h2>
                <p>Comprehensive school administration platform with parent, admin, and student portals for academic progress tracking and management.</p>
                <div class="tech-tags">
                  <span class="tag">PHP</span><span class="tag">MySQL</span><span class="tag">JavaScript</span><span class="tag">HTML5</span><span class="tag">CSS3</span>
                </div>
                <div class="project-links">
                  <a href="https://www.springbase.com.ng/" target="_blank">Main Site</a>
                  <button class="btn btn-secondary case-study-btn" data-case-study="springbase-management">View Case Study</button>
                </div>
              </div>
              <div class="project-media">
                <div class="project-card">
                  <img 
                    src="https://s.wordpress.com/mshots/v1/https%3A%2F%2Fadmin.springbase.com.ng%2F?w=1200" 
                    alt="Springbase School Management System - Admin Portal"
                    loading="lazy"
                    decoding="async"
                    referrerpolicy="no-referrer"
                  >
                </div>
                <div class="panel-accent"></div>
              </div>
            </article>

            <!-- Panel 5: Folashaye Global -->
            <article class="project-panel" data-accent data-tags="html5,css3,javascript,react,seo">
              <div class="project-info">
                <h2>Folashaye Global</h2>
                <p>Business solutions website for haulage, vocational services, construction, and exam registration services in Lagos State.</p>
                <div class="tech-tags">
                  <span class="tag">HTML5</span><span class="tag">CSS3</span><span class="tag">JavaScript</span><span class="tag">React</span><span class="tag">SEO</span>
                </div>
                <div class="project-links">
                  <a href="https://folashayeglobal.com/" target="_blank">Live Site</a>
                  <button class="btn btn-secondary case-study-btn" data-case-study="folashaye-global">View Case Study</button>
                </div>
              </div>
              <div class="project-media">
                <div class="project-card">
                  <img 
                    src="https://s.wordpress.com/mshots/v1/https%3A%2F%2Ffolashayeglobal.com%2F?w=1200" 
                    alt="Folashaye Global"
                    loading="lazy"
                    decoding="async"
                    referrerpolicy="no-referrer"
                  >
                </div>
                <div class="panel-accent"></div>
              </div>
            </article>

            <!-- Panel 6: ShopMaster -->
            <article class="project-panel" data-accent data-tags="react,nextjs,typescript,tailwind">
              <div class="project-info">
                <h2>ShopMaster</h2>
                <p>Modern business directory platform connecting customers with trusted local services and businesses.</p>
                <div class="tech-tags">
                  <span class="tag">React</span><span class="tag">Next.js</span><span class="tag">TypeScript</span><span class="tag">Tailwind</span>
                </div>
                <div class="project-links">
                  <a href="https://shopmaster.folashayeglobal.com/" target="_blank">Live Site</a>
                  <button class="btn btn-secondary case-study-btn" data-case-study="shopmaster">View Case Study</button>
                </div>
              </div>
              <div class="project-media">
                <div class="project-card">
                  <img 
                    src="https://s.wordpress.com/mshots/v1/https%3A%2F%2Fshopmaster.folashayeglobal.com%2F?w=1200" 
                    alt="ShopMaster"
                    loading="lazy"
                    decoding="async"
                    referrerpolicy="no-referrer"
                  >
                </div>
                <div class="panel-accent"></div>
              </div>
            </article>

            <!-- Panel 7: InsightPilot -->
            <article class="project-panel" data-accent data-tags="react,nextjs,typescript,tailwind,vercel">
              <div class="project-info">
                <h2>InsightPilot</h2>
                <p>Data visualization tool that transforms CSVs into beautiful dashboards with automatic analysis and export capabilities.</p>
                <div class="tech-tags">
                  <span class="tag">React</span><span class="tag">Next.js</span><span class="tag">TypeScript</span><span class="tag">Tailwind</span><span class="tag">Vercel</span>
                </div>
                <div class="project-links">
                  <a href="https://insightpilot-drab.vercel.app/" target="_blank">Live Demo</a>
                  <button class="btn btn-secondary case-study-btn" data-case-study="insightpilot">View Case Study</button>
                </div>
              </div>
              <div class="project-media">
                <div class="project-card">
                  <img 
                    src="https://s.wordpress.com/mshots/v1/https%3A%2F%2Finsightpilot-drab.vercel.app%2F?w=1200" 
                    alt="InsightPilot"
                    loading="lazy"
                    decoding="async"
                    referrerpolicy="no-referrer"
                  >
                </div>
                <div class="panel-accent"></div>
              </div>
            </article>

            <!-- Panel 8: MindSpace AI -->
            <article class="project-panel" data-accent data-tags="nextjs,typescript,tailwind,vercel">
              <div class="project-info">
                <h2>MindSpace AI</h2>
                <p>Mental wellness assistant with Google auth and AI‚Äëdriven guidance, deployed on Vercel.</p>
                <div class="tech-tags">
                  <span class="tag">Next.js</span><span class="tag">TypeScript</span><span class="tag">Tailwind</span><span class="tag">Vercel</span>
                </div>
                <div class="project-links">
                  <a href="https://mindspace-ai.vercel.app/auth" target="_blank">Live Demo</a>
                  <button class="btn btn-secondary case-study-btn" data-case-study="mindspace-ai">View Case Study</button>
                </div>
              </div>
              <div class="project-media">
                <div class="project-card">
                  <img 
                    src="assets/MindSpace AI - Mental Wellness & Productivity Coach - Google Chrome 8_27_2025 12_13_26 AM.png" 
                    alt="MindSpace AI"
                    loading="lazy"
                    decoding="async"
                  >
                </div>
                <div class="panel-accent"></div>
              </div>
            </article>

            <!-- Panel 9: Springbase School -->
            <article class="project-panel" data-accent data-tags="html5,css3,javascript,seo">
              <div class="project-info">
                <h2>Springbase School</h2>
                <p>Clean, accessible school website highlighting programs, facilities, admissions and student life.</p>
                <div class="tech-tags">
                  <span class="tag">HTML5</span><span class="tag">CSS3</span><span class="tag">JavaScript</span><span class="tag">SEO</span>
                </div>
                <div class="project-links">
                  <a href="https://www.springbase.com.ng/" target="_blank">Live Site</a>
                  <button class="btn btn-secondary case-study-btn" data-case-study="springbase-school">View Case Study</button>
                </div>
              </div>
              <div class="project-media">
                <div class="project-card">
                  <img 
                    src="https://s.wordpress.com/mshots/v1/https%3A%2F%2Fwww.springbase.com.ng%2F?w=1200" 
                    alt="Springbase Website"
                    loading="lazy"
                    decoding="async"
                    referrerpolicy="no-referrer"
                  >
                </div>
                <div class="panel-accent"></div>
            </div>
            </article>
          </div>
          
          <div class="snap-indicator">Scroll ‚Ä¢ ‚Ä¢ ‚Ä¢</div>
          
          <div class="cta-buttons" style="margin-top: 2rem;">
            <a href="index.html" class="btn btn-secondary">Back to Home</a>
            <a href="skills.html" class="btn btn-primary">View Skills</a>
          </div>
        </section>
      </main>

      <footer class="footer">
        <div class="copyright">@2025 Obaniwa Michael all rights reserved</div>
        <div class="social-links">
          <a href="https://wa.me/08071897468?text=Hello%20Obaniwa%20Michael!%20I%20would%20like%20to%20discuss%20a%20potential%20opportunity%20with%20you." target="_blank" class="social-icon whatsapp" title="WhatsApp"></a>
          <a href="https://github.com/Raidreaper" target="_blank" class="social-icon github" title="GitHub"></a>
        </div>
      </footer>
      
      <!-- AI Chat Button - Floating Action Button -->
      <div class="ai-chat-fab" id="aiChatFab">
        <div class="ai-chat-icon">ü§ñ</div>
        <div class="ai-chat-label">AI Assistant</div>
      </div>

      <!-- AI Chat Modal (full markup to match main.js) -->
      <div class="ai-chat-modal" id="aiChatModal">
        <div class="ai-chat-header">
          <div class="ai-chat-title">
            <span class="ai-avatar">ü§ñ</span>
            <span>RaidBot</span>
          </div>
          <button class="ai-chat-close" id="aiChatClose">√ó</button>
        </div>
        <div class="ai-chat-messages" id="aiChatMessages"></div>
        <div class="ai-chat-input-container">
          <input type="text" class="ai-chat-input" id="aiChatInput" placeholder="Ask me about this portfolio...">
          <button class="ai-chat-send" id="aiChatSend">‚û§</button>
        </div>
      </div>
      <div class="ai-chat-overlay" id="aiChatOverlay"></div>
    </div>

    <!-- Case Study Modal -->
    <div id="caseStudyModal" class="modal case-study-modal" role="dialog" aria-labelledby="caseStudyTitle" aria-hidden="true">
      <div class="modal-content case-study-content">
        <div class="modal-header case-study-header">
          <div class="case-study-header-info">
            <h2 id="caseStudyTitle" class="case-study-title"></h2>
            <div class="case-study-meta">
              <span class="case-study-client"></span>
              <span class="case-study-duration"></span>
            </div>
          </div>
          <button class="close-btn" id="closeCaseStudyModal" aria-label="Close case study">√ó</button>
        </div>
        
        <div class="modal-body case-study-body">
          <div class="case-study-section">
            <h3 class="case-study-section-title">The Challenge</h3>
            <p class="case-study-challenge"></p>
          </div>

          <div class="case-study-section">
            <h3 class="case-study-section-title">My Role & Approach</h3>
            <ul class="case-study-list case-study-role"></ul>
          </div>

          <div class="case-study-section">
            <h3 class="case-study-section-title">Technical Implementation</h3>
            <ul class="case-study-list case-study-technical"></ul>
          </div>

          <div class="case-study-section">
            <h3 class="case-study-section-title">Results & Impact</h3>
            <ul class="case-study-list case-study-results"></ul>
          </div>

          <div class="case-study-section case-study-gallery-section">
            <h3 class="case-study-section-title">Visual Showcase</h3>
            <div class="case-study-gallery">
              <div class="case-study-gallery-container">
                <button class="gallery-nav gallery-prev" aria-label="Previous image">‚Äπ</button>
                <div class="gallery-viewport">
                  <div class="gallery-track"></div>
                </div>
                <button class="gallery-nav gallery-next" aria-label="Next image">‚Ä∫</button>
              </div>
              <div class="gallery-indicators"></div>
            </div>
          </div>
        </div>

        <div class="modal-footer case-study-footer">
          <div class="case-study-footer-links">
            <a href="#" class="btn btn-primary case-study-live-btn" target="_blank">View Live Demo</a>
            <a href="#" class="btn btn-secondary case-study-github-btn" target="_blank" style="display: none;">View on GitHub</a>
          </div>
        </div>
      </div>
    </div>

    <script src="main.js" type="module"></script>
    <script src="three-background.js" type="module"></script>
    <script src="projects-scroll-animations.js" type="module"></script>
    <script>
      // Parallax accent follows mouse per panel
      document.querySelectorAll('[data-accent]').forEach(panel => {
        const accent = panel.querySelector('.panel-accent');
        panel.addEventListener('mousemove', (e) => {
          const r = panel.getBoundingClientRect();
          const x = (e.clientX - r.left) / r.width * 100;
          const y = (e.clientY - r.top) / r.height * 100;
          accent && accent.style.setProperty('--mx', x + '%');
          accent && accent.style.setProperty('--my', y + '%');
        });
      });

      // Tag filtering + deep-linking (?tag=react)
      (function(){
        const container = document.getElementById('projectsSnap');
        const panels = Array.from(container.querySelectorAll('.project-panel'));
        const buttons = Array.from(document.querySelectorAll('.project-filters [data-filter]'));

        function applyFilter(tag){
          const t = (tag||'all').toLowerCase();
          panels.forEach(p => {
            const tags = (p.getAttribute('data-tags')||'').split(',');
            const show = t==='all' || tags.includes(t);
            p.style.display = show ? '' : 'none';
          });
          // reset scroll to first visible panel
          const first = panels.find(p => p.style.display !== 'none');
          if (first) first.scrollIntoView({ behavior:'smooth', block:'start'});
        }

        // Button clicks
        buttons.forEach(b => b.addEventListener('click', () => {
          const tag = b.getAttribute('data-filter');
          const url = new URL(location.href);
          url.searchParams.set('tag', tag);
          history.replaceState(null, '', url.toString());
          applyFilter(tag);
        }));

        // On load from URL
        const initial = new URL(location.href).searchParams.get('tag');
        if (initial) applyFilter(initial); else applyFilter('all');
      })();

      // Optimized Image Loading with Error Handling
      (function() {
        const projectImages = document.querySelectorAll('.project-card img');
        let loadedCount = 0;
        const totalImages = projectImages.length;
        
        // Placeholder SVG for failed images
        const placeholderSVG = `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600'%3E%3Crect fill='%2314141e' width='800' height='600'/%3E%3Ctext fill='%23808080' font-family='sans-serif' font-size='18' x='50%25' y='50%25' text-anchor='middle' dy='.3em'%3EImage not available%3C/text%3E%3C/svg%3E`;
        
        // Function to handle image load
        function handleImageLoad(img) {
          img.classList.add('loaded');
          const card = img.closest('.project-card');
          if (card) {
            card.classList.add('image-loaded');
          }
          loadedCount++;
        }

        // Function to handle image error with retry logic
        function handleImageError(img, retryCount = 0) {
          const maxRetries = 2;
          const card = img.closest('.project-card');
          
          // Try to reload if external URL and retries available
          if (retryCount < maxRetries && img.src.startsWith('http')) {
            setTimeout(() => {
              const newImg = new Image();
              newImg.onload = () => {
                img.src = newImg.src;
                handleImageLoad(img);
              };
              newImg.onerror = () => {
                handleImageError(img, retryCount + 1);
              };
              newImg.src = img.src + (img.src.includes('?') ? '&retry=' + Date.now() : '?retry=' + Date.now());
            }, 1000 * (retryCount + 1));
            return;
          }
          
          // Show placeholder after all retries fail
          img.classList.add('loaded', 'error');
          img.src = placeholderSVG;
          img.alt = img.alt + ' (Image unavailable)';
          
          if (card) {
            card.classList.add('image-loaded', 'image-error');
          }
          loadedCount++;
        }

        // Preload critical images (first 2)
        const firstImages = Array.from(projectImages).slice(0, 2);
        firstImages.forEach((img, index) => {
          if (!img.complete) {
            const link = document.createElement('link');
            link.rel = 'preload';
            link.as = 'image';
            link.href = img.src;
            if (index === 0) {
              link.fetchPriority = 'high';
            }
            document.head.appendChild(link);
          }
        });

        // Check if image is already loaded (cached)
        projectImages.forEach(img => {
          if (img.complete && img.naturalHeight !== 0) {
            handleImageLoad(img);
          } else {
            img.addEventListener('load', () => handleImageLoad(img), { once: true });
            img.addEventListener('error', () => handleImageError(img), { once: true });
          }
        });

        // Intersection Observer for lazy loading optimization
        if ('IntersectionObserver' in window) {
          const imageObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                const img = entry.target;
                if (!img.complete && !img.classList.contains('loading')) {
                  img.classList.add('loading');
                  // Force load by triggering reload if needed
                  if (img.dataset.src) {
                    img.src = img.dataset.src;
                    delete img.dataset.src;
                  } else if (!img.src || img.src === '') {
                    // Handle case where src might be empty
                    return;
                  }
                }
                observer.unobserve(img);
              }
            });
          }, {
            rootMargin: '100px', // Start loading earlier for smoother experience
            threshold: 0.01
          });

          // Observe all lazy-loaded images
          projectImages.forEach(img => {
            if (img.loading === 'lazy') {
              imageObserver.observe(img);
            }
          });
        }
      })();
    </script>
  </body>
</html>


